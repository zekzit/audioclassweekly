{% extends "audios/base.html" %} {% block content %}
<br/>
<h2>{{ week.audio_class.audio_class_name }} - {{ week.week_name }}</h2>
<br/>
<br/>
<div id="single-song-player">
    <div class="bottom-container">
        <progress class="amplitude-song-played-progress" id="song-played-progress"></progress>

        <div class="time-container">
            <span class="current-time">
          <span class="amplitude-current-minutes"></span>:<span class="amplitude-current-seconds"></span>
            </span>
            <span class="duration">
          <span class="amplitude-duration-minutes"></span>:<span class="amplitude-duration-seconds"></span>
            </span>
        </div>

        <div class="control-container">
            <div class="amplitude-play-pause" id="play-pause"></div>
            <div class="meta-container">
                <span data-amplitude-song-info="name" class="song-name"></span>
                <span data-amplitude-song-info="artist"></span>
            </div>
        </div>
    </div>
</div>
<br/>
<br/>
<p><a href="{{ week.audio_file.url }}" download="audioRecord">Download File</a></p>
<p><a href="/">Back to listing page</a></p>
<br/> .....................................
<p></p>
<p>Contact me: <a href="mailto:ferin.mac@gmail.com?subject=Share Audio Records">ferin.mac@gmail.com</a></p>
<script>
    Amplitude.init({
        "bindings": {
            37: 'prev',
            39: 'next',
            32: 'play_pause'
        },
        "songs": [{
            "name": "{{ week.week_name }}",
            "artist": "{{ week.audio_class.audio_class_name }}",
            "url": "{{ week.audio_file.url }}",
        }]
    });

    window.onkeydown = function(e) {
        return !(e.keyCode == 32);
    };

    /*
      Handles a click on the song played progress bar.
    */
    document.getElementById('song-played-progress').addEventListener('click', function(e) {
        var offset = this.getBoundingClientRect();
        var x = e.pageX - offset.left;

        Amplitude.setSongPlayedPercentage((parseFloat(x) / parseFloat(this.offsetWidth)) * 100);
    });
</script>
{% endblock content %}